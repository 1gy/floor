var Te=Object.defineProperty,Fe=Object.defineProperties;var je=Object.getOwnPropertyDescriptors;var he=Object.getOwnPropertySymbols;var He=Object.prototype.hasOwnProperty,Ke=Object.prototype.propertyIsEnumerable;var pe=(e,t,r)=>t in e?Te(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ge=(e,t)=>{for(var r in t||(t={}))He.call(t,r)&&pe(e,r,t[r]);if(he)for(var r of he(t))Ke.call(t,r)&&pe(e,r,t[r]);return e},Se=(e,t)=>Fe(e,je(t));var ze=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)};var V=(e,t,r)=>(ze(e,t,"read from private field"),r?r.call(e):t.get(e)),Ee=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},H=(e,t,r,a)=>(ze(e,t,"write to private field"),a?a.call(e,r):t.set(e,r),r);import{f as c,r as E,t as ye,v as Re,w as $,j as k}from"./vendor.10460ee6.js";import{_ as Ne}from"./index.e94d048a.js";function M(){return M=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},M.apply(this,arguments)}function Ue(e,t){if(e==null)return{};var r={},a=Object.keys(e),n,s;for(s=0;s<a.length;s++)n=a[s],!(t.indexOf(n)>=0)&&(r[n]=e[n]);return r}var Be=["bottom","height","left","right","top","width"],De=function(t,r){return t===void 0&&(t={}),r===void 0&&(r={}),Be.some(function(a){return t[a]!==r[a]})},R=new Map,xe,qe=function e(){var t=[];R.forEach(function(r,a){var n=a.getBoundingClientRect();De(n,r.rect)&&(r.rect=n,t.push(r))}),t.forEach(function(r){r.callbacks.forEach(function(a){return a(r.rect)})}),xe=window.requestAnimationFrame(e)};function Je(e,t){return{observe:function(){var a=R.size===0;R.has(e)?R.get(e).callbacks.push(t):R.set(e,{rect:void 0,hasRectChanged:!1,callbacks:[t]}),a&&qe()},unobserve:function(){var a=R.get(e);if(a){var n=a.callbacks.indexOf(t);n>=0&&a.callbacks.splice(n,1),a.callbacks.length||R.delete(e),R.size||cancelAnimationFrame(xe)}}}}var K=typeof window!="undefined"?c.useLayoutEffect:c.useEffect;function We(e,t){t===void 0&&(t={width:0,height:0});var r=c.useState(e.current),a=r[0],n=r[1],s=c.useReducer(Ge,t),f=s[0],v=s[1],x=c.useRef(!1);return K(function(){e.current!==a&&n(e.current)}),K(function(){if(a&&!x.current){x.current=!0;var m=a.getBoundingClientRect();v({rect:m})}},[a]),c.useEffect(function(){if(!!a){var m=Je(a,function(_){v({rect:_})});return m.observe(),function(){m.unobserve()}}},[a]),f}function Ge(e,t){var r=t.rect;return e.height!==r.height||e.width!==r.width?r:e}var Qe=function(){return 50},Xe=function(t){return t},Ye=function(t,r){var a=r?"offsetWidth":"offsetHeight";return t[a]},Ze=function(t){for(var r=Math.max(t.start-t.overscan,0),a=Math.min(t.end+t.overscan,t.size-1),n=[],s=r;s<=a;s++)n.push(s);return n};function ft(e){var t,r=e.size,a=r===void 0?0:r,n=e.estimateSize,s=n===void 0?Qe:n,f=e.overscan,v=f===void 0?1:f,x=e.paddingStart,m=x===void 0?0:x,_=e.paddingEnd,Me=_===void 0?0:_,O=e.parentRef,A=e.horizontal,w=e.scrollToFn,we=e.useObserver,Ie=e.initialRect,G=e.onScrollElement,Q=e.scrollOffsetFn,X=e.keyExtractor,Y=X===void 0?Xe:X,Z=e.measureSize,ee=Z===void 0?Ye:Z,te=e.rangeExtractor,re=te===void 0?Ze:te,Oe=A?"width":"height",P=A?"scrollLeft":"scrollTop",S=c.useRef({scrollOffset:0,measurements:[]}),ae=c.useState(0),Ce=ae[0],ne=ae[1];S.current.scrollOffset=Ce;var Le=we||We,Ve=Le(O,Ie),$e=Ve[Oe];S.current.outerSize=$e;var C=c.useCallback(function(o){O.current&&(O.current[P]=o)},[O,P]),se=w||C;w=c.useCallback(function(o){se(o,C)},[C,se]);var oe=c.useState({}),ue=oe[0],N=oe[1],ke=c.useCallback(function(){return N({})},[]),T=c.useRef([]),I=c.useMemo(function(){var o=T.current.length>0?Math.min.apply(Math,T.current):0;T.current=[];for(var l=S.current.measurements.slice(0,o),u=o;u<a;u++){var d=Y(u),i=ue[d],z=l[u-1]?l[u-1].end:m,h=typeof i=="number"?i:s(u),p=z+h;l[u]={index:u,start:z,size:h,end:p,key:d}}return l},[s,ue,m,a,Y]),ce=(((t=I[a-1])==null?void 0:t.end)||m)+Me;S.current.measurements=I,S.current.totalSize=ce;var L=G?G.current:O.current,U=c.useRef(Q);U.current=Q,K(function(){if(!L){ne(0);return}var o=function(u){var d=U.current?U.current(u):L[P];ne(d)};return o(),L.addEventListener("scroll",o,{capture:!1,passive:!0}),function(){L.removeEventListener("scroll",o)}},[L,P]);var ie=tt(S.current),le=ie.start,fe=ie.end,B=c.useMemo(function(){return re({start:le,end:fe,overscan:v,size:I.length})},[le,fe,v,I.length,re]),ve=c.useRef(ee);ve.current=ee;var _e=c.useMemo(function(){for(var o=[],l=function(z,h){var p=B[z],F=I[p],b=M(M({},F),{},{measureRef:function(j){if(j){var J=ve.current(j,A);if(J!==b.size){var me=S.current.scrollOffset;b.start<me&&C(me+(J-b.size)),T.current.push(p),N(function(Pe){var W;return M(M({},Pe),{},(W={},W[b.key]=J,W))})}}}});o.push(b)},u=0,d=B.length;u<d;u++)l(u);return o},[B,C,A,I]),de=c.useRef(!1);K(function(){de.current&&N({}),de.current=!0},[s]);var D=c.useCallback(function(o,l){var u=l===void 0?{}:l,d=u.align,i=d===void 0?"start":d,z=S.current,h=z.scrollOffset,p=z.outerSize;i==="auto"&&(o<=h?i="start":o>=h+p?i="end":i="start"),i==="start"?w(o):i==="end"?w(o-p):i==="center"&&w(o-p/2)},[w]),q=c.useCallback(function(o,l){var u=l===void 0?{}:l,d=u.align,i=d===void 0?"auto":d,z=Ue(u,["align"]),h=S.current,p=h.measurements,F=h.scrollOffset,b=h.outerSize,y=p[Math.max(0,Math.min(o,a-1))];if(!!y){if(i==="auto")if(y.end>=F+b)i="end";else if(y.start<=F)i="start";else return;var j=i==="center"?y.start+y.size/2:i==="end"?y.end:y.start;D(j,M({align:i},z))}},[D,a]),Ae=c.useCallback(function(){for(var o=arguments.length,l=new Array(o),u=0;u<o;u++)l[u]=arguments[u];q.apply(void 0,l),requestAnimationFrame(function(){q.apply(void 0,l)})},[q]);return{virtualItems:_e,totalSize:ce,scrollToOffset:D,scrollToIndex:Ae,measure:ke}}var et=function(t,r,a,n){for(;t<=r;){var s=(t+r)/2|0,f=a(s);if(f<n)t=s+1;else if(f>n)r=s-1;else return s}return t>0?t-1:0};function tt(e){for(var t=e.measurements,r=e.outerSize,a=e.scrollOffset,n=t.length-1,s=function(m){return t[m].start},f=et(0,n,s,a),v=f;v<n&&t[v].end<a+r;)v++;return{start:f,end:v}}var g;class rt{constructor(t){Ee(this,g,void 0);H(this,g,{status:"pending",promise:t.then(r=>(H(this,g,{status:"fulfilled",data:r}),r),r=>{throw H(this,g,{status:"rejected",error:r}),r})})}getValue(){switch(V(this,g).status){case"pending":throw V(this,g).promise;case"fulfilled":return V(this,g).data;case"rejected":throw V(this,g).error}}}g=new WeakMap;const be=new rt(Ne(()=>import("./data.21720e42.js"),[])),vt=()=>({contests:be.getValue().contests}),dt=()=>{const e=be.getValue().contests;return E.exports.useMemo(()=>{const t=e.map(a=>a.musics.map((n,s)=>Se(ge({},n),{contest:a.id,musicId:`${a.id}_${s}`}))).flat(),r=Object.fromEntries(t.map(a=>[a.musicId,a]));return{musics:t,musicTable:r}},[e])},at=ye({key:"floor.library.playingMusic",default:null}),mt=()=>Re(at),ht=$(k("path",{d:"M10 8.64L15.27 12 10 15.36V8.64M8 5v14l11-7L8 5z"}),"PlayArrowIcon"),pt=$(k("path",{d:"M6 19h4V5H6v14zm8-14v14h4V5h-4z"}),"PauseIcon"),gt=$(k("path",{d:"M16 7.97v8.05c1.48-.73 2.5-2.25 2.5-4.02 0-1.77-1.02-3.29-2.5-4.03zM5 9v6h4l5 5V4L9 9H5zm7-.17v6.34L9.83 13H7v-2h2.83L12 8.83z"}),"VolumeDownIcon"),St=$(k("path",{d:"M3 9v6h4l5 5V4L7 9H3zm7-.17v6.34L7.83 13H5v-2h2.83L10 8.83zM16.5 12c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77 0-4.28-2.99-7.86-7-8.77z"}),"VolumeUpIcon"),zt=$(k("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"}),"CloseIcon"),nt=e=>({setSelf:t,onSet:r})=>{const a=localStorage.getItem(e);a!=null&&t(JSON.parse(a)),r((n,s,f)=>{f?localStorage.removeItem(e):localStorage.setItem(e,JSON.stringify(n))})},st=ye({key:"1gy.floor.volume",default:.5,effects:[nt("1gy.floor.volume")]}),Et=()=>Re(st),ot=()=>{const[,e]=E.exports.useState(!1);return E.exports.useCallback(()=>e(t=>!t),[])},ut=()=>{const e=window.navigator.userAgent.toLocaleLowerCase();return!(e.includes("iphone")||e.includes("ipad"))},yt=(e,t,r)=>{const a=E.exports.useMemo(()=>new Audio(e),[e]),n=E.exports.useMemo(()=>ut(),[]),s=ot();E.exports.useEffect(()=>(a.volume=0,a.volume=t,a.addEventListener("play",s),a.addEventListener("pause",s),r&&a.play().catch(x=>{}),()=>{a.pause(),a.removeEventListener("play",s),a.removeEventListener("pause",s)}),[a]),E.exports.useEffect(()=>{a.volume=t},[a,t]);const f=E.exports.useCallback(()=>{a.play()},[a]),v=E.exports.useCallback(()=>{a.pause()},[a]);return{playing:!a.paused,play:f,pause:v,canUseVolume:n}};export{zt as C,pt as P,gt as V,ft as a,mt as b,Et as c,yt as d,ht as e,St as f,vt as g,dt as u};
